# SubQuery ноември техническа актуализация: EVM и манифестни актуализации

![](https://miro.medium.com/max/1400/1*q9GErDrvAyacOPm97krV6Q.png)

**Прочетете повече за нашето техническо потапяне в най-новата версия на SubQuery**

# Поддръжка за файлове от външен тип верига в манифеста на проекта

Днес е стартирането на [версия 0.2.0](https://doc.subquery.network/create/manifest/) на манифестния файл на нашия проект (`project.yaml`). Тази нова версия предоставя на разработчиците различни подобрения, които са били поискани от клиентите.

Най-важното е, че вече можете да се позовавате на файл с дефиниция на тип верига, който включва всички персонализирани типове, когато индексирате персонализирана верига на субстрата. Това бързо ви позволява да свържете нов проект SubQuery към всяка верига, базирана на субстрат, включително всички паравериги на Kusama. Това трябва да е файл от стандартен тип верига, който декларира специфичните типове, поддържани от този блокчейн във формат `.json` или `.yaml`.

Това решение ви позволява да избягвате копирането и управлението на дефинициите на тип верига в самия манифест и ви позволява просто да клонирате [публикуваните файлове с тип верига, изброени в хранилища като PolkadotJS](https://github.com/polkadot-js/apps/tree/master/packages/apps-config/src/api/spec).

[Можете да прочетете за новия файл на манифеста, включително как можете да мигрирате проектите си към него, тук в нашите актуализирани документи.](https://doc.subquery.network/create/manifest/)

# Поддръжка на Moonbeam EVM

Миналата седмица с удоволствие [обявихме, че работим с Moonbeam, за да предоставим пълна поддръжка за EVM и Substrate индексиране на Moonriver](https://subquery.medium.com/subquery-adds-ethereum-virtual-machine-evm-functionality-in-integration-with-moonbeam-and-ddbcdf0fd8ff).

Днес проследяваме това съобщение с всички ресурси за разработчици, от които се нуждаете, за да започнете.

Понастоящем няма инструмент с отворен код, който позволява на разработчиците гъвкаво да събират и заявяват данни както в Ethereum, така и в Polkadot/Kusama. Това ограничение може да накара решенията за dApps в рамките на Moonriver да бъдат изолирани в слоя на интелигентния договор и по този начин да ограничи потенциала им до потребителите в двете процъфтяващи мрежи. Това партньорство с Moonbeam носи цялостно и унифицирано решение за индексиране на данни за всички блокчейн данни в Moonriver и ще бъде от голяма полза за нарастващата екосистема на приложенията на Moonriver.

**SubQuery ще бъде гост на следващия семинар на Moonbuilders в сряда, 1 декември,** [**Регистрирайте се за него тук**](https://www.crowdcast.io/e/moonbuilders-ws/10)**.**

![](https://miro.medium.com/max/600/1*AET6Ek_PqFDRoc29Jiitnw.gif)

[Първо, запознайте се с актуализираната документация за това как да се свържете и индексирате данни от Moonbeam, Moonbase Alpha и Moonriver.](https://doc.subquery.network/create/moonbeam/) Процесът за индексиране на данни Moonbeam е само две стъпки:

## Стъпка 1: Добавете персонализирания източник на данни Moonbeam

Създадохме процесор на данни, специално създаден да работи с внедряването на Moonbeam на [Frontier](https://github.com/paritytech/frontier). Позволява ви да препращате към специфични ABI ресурси, използвани от процесора, за да анализирате аргументите и адреса на интелигентния договор, от който идват събитията или до който е направено повикването. [Можете да прочетете повече тук](https://doc.subquery.network/create/moonbeam/#data-source-spec).

SubQuery въвежда по-усъвършенствани филтри от другите индексатори, позволявайки филтриране на извъндоговорни транзакции, податели на транзакции, договори и индексирани аргументи на журнала. Това позволява на разработчиците да създават голямо разнообразие от проекти, които отговарят на техните специфични нужди от данни.

## Стъпка 2: Индексирайте данните за лунния лъч

Точно като нормален проект SubQuery, вие използвате функция за съпоставяне за трансформиране на данни извън веригата към обектите на GraphQL, които дефинирате, разликата е, че вместо `SubstrateEvent` или `SubstrateExtrinsic`, вашата функция за картографиране ще получи `MoonbeamCall` или `MoonbeamEvent`, които са базирани на типа [TransactionResponse](https://docs.ethers.io/v5/api/providers/types/#providers-TransactionResponse) или [Log](https://docs.ethers.io/v5/api/providers/types/#providers-Log) на Ether. [Можете да прочетете повече за тях тук](https://doc.subquery.network/create/moonbeam/#moonbeamcall).

[Прочетете пълната документация за този процес тук](https://doc.subquery.network/create/moonbeam/#moonbeamcall)

## Примерен проект

Има пълен примерен проект, който индексира eth `transfer` събития и `одобрява` интелигентни договори. Кодът за този примерен проект е [тук в GitHub](https://github.com/subquery/tutorials-moonriver-evm-starter) или е достъпен чрез [живия проект SubQuery в SubQuery Explorer тук](https://explorer.subquery.network/subquery/subquery/moonriver-evm-starter-project).

По-голямата част от промените се извършват във файла на манифеста (`project.yaml`). По-долу можете да видите, че имаме [разширени филтри за повиквания](https://doc.subquery.network/create/moonbeam/#call-filters), които поддържат или [низове за подпис на функция](https://docs.ethers.io/v5/api/utils/abi/fragments/#FunctionFragment), или функцията sighash за филтриране на функцията, извикана в договора. За [филтри за събития](https://doc.subquery.network/create/moonbeam/#event-filters) можете да използвате филтриране на теми, което следва [стандарта за филтри за регистрационни файлове на Ethereum JSON-PRC, намерен тук](https://docs.ethers.io/v5/concepts/events/). Имайте предвид, че SubQuery въвежда по-усъвършенствани филтри от други индексатори за Moonbeam EVM и тези подобрения би трябвало значително да са от полза за разработчиците.

![](https://miro.medium.com/max/700/1*4JRHItnILfCie4FT6sYLEA.png)

Ако сте запознати с начина, по който се създава SubQuery проект, базиран на Substrate, ще забележите колко сходни са функциите за картографиране за новата поддръжка на Moonriver. Всяка функция за картографиране получава `MoonbeamCall` или `MoonbeamEvent` и ги обработва точно както всеки друг проект на SubQuery.

![](https://miro.medium.com/max/700/1*k4_uJYYCsTnPRRJ7avq2WA.png)

Ако имате някакви въпроси относно това, уверете се, че [проверите нашите документи](https://doc.subquery.network/create/moonbeam) или се свържете с нас на нашия канал #technical-support в нашата [общност на Discord](https://discord.com/invite/subquery).

[Клонирайте примерния проект в GitHub](https://github.com/subquery/tutorials-moonriver-evm-starter)

Както можете да видите, създаването на проект Moonriver или Moonbase Alpha, който индексира както Substrate, така и EVM данни в един проект, е изключително просто и до голяма степен подобно. Можете да използвате усъвършенстваните инструменти за скеле на SubQuery, за да ускорите развитието на вашите dApp и да се възползвате от предимствата или по-богато индексиране на вашите данни, за да създадете по-интуитивни dApps. Нямаме търпение да видим какво създавате!

## Относно SubQuery

SubQuery е слой за агрегиране на данни, който работи между блокчейновете от слой 1 (като Moonriver и Polkadot) и DApps. Тази услуга отключва блокчейн данни и ги трансформира в състояние за запитване, така че да може да се използва в интуитивни приложения. Той позволява на разработчиците на DApp да се съсредоточат върху основния си случай на използване и предния край, без да е необходимо да губят време за изграждане на персонализиран бекенд за обработка на данни.

​​[Linktree](https://linktr.ee/subquerynetwork) | [Website](https://subquery.network/) | [Discord](https://discord.com/invite/78zg8aBSMG) | [Telegram](https://t.me/subquerynetwork) | [Twitter](https://twitter.com/subquerynetwork) | [Matrix](https://matrix.to/#/#subquery:matrix.org) | [LinkedIn](https://www.linkedin.com/company/subquery) | [Github](https://github.com/subquery/subql) | [YouTube](https://www.youtube.com/channel/UCi1a6NUUjegcLHDFLr7CqLw)

## Относно Moonbeam

Moonbeam е платформа за смарт договори, съвместима с Ethereum в мрежата Polkadot, която улеснява изграждането на вътрешно съвместими приложения. Тази съвместимост с Ethereum позволява на разработчиците да внедряват съществуващи интелигентни договори на Solidity и интерфейси на DApp към Moonbeam с минимални промени. Като парачейн в мрежата на Polkadot, Moonbeam ще се възползва от споделената сигурност на релейната верига Polkadot и интеграции с други вериги, които са свързани с Polkadot. В момента в активна разработка от PureStake, Moonbeam се очаква да достигне до MainNet до четвъртото тримесечие на 2021 г. Научете повече: [https://moonbeam.network/](https://moonbeam.network/).
