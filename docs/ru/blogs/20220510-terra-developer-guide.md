# Инструкция по подзапросу Терра

![](https://miro.medium.com/max/1400/1*DiTE9KuzH0xHLojzGWxOuw.png)

В течение довольно долгого времени мы разрабатывали и совершенствовали поддержку Terra, а также тестировали ее с ключевыми партнерами по запуску разработки (следите за анонсами в ближайшие дни). Этот длительный период позволил нам стать чрезвычайно уверенными в масштабируемости, надежности и функциях, которые SubQuery предоставляет Terra на сегодняшний день. В этой статье мы делимся подробным руководством для разработчиков и дорожной картой, которые все сообщество Terra может использовать для решения своих потребностей в индексации данных.

Subquery - это гибкий и быстрый индексатор открытых данных. Наш открытый инструмент индексирования предназначен для того, чтобы помочь разработчикам создавать свой собственный API за считанные часы. Он предназначен для невероятно быстрого индексирования цепочек с помощью словарей (предварительно вычисленных индексов). Наш опыт работы с клиентами во всех вертикалях Polkadot (кошельки, сети, исследователи, NFT, DeFi, сканеры и т.д.) помог нам создать это.

Это все еще ранние версии, и, хотя мы заглядываем далеко за пределы "бета-версии", будем признательны, если о любых ошибках вы будете сообщать нашей команде для их оперативного устранения.

<iframe width="656" height="369" src="https://www.youtube.com/embed/dS7h3isQCeA" title="Проигрыватель YouTube" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

## Почему стоит использовать SubQuery?

Экосистема приложений преуспела в Terra, несмотря на серьезную нехватку некоторых ключевых инструментов разработчика и инфраструктурных сервисов. Это удивительно видеть, но главное, что это свидетельство упорства и изобретательности Lunatics в Terra. В большинстве случаев, когда мы спрашивали команды, как они решают свои потребности в индексации данных, это было:

- **Создание собственного решения:** Пользовательская реализация, выполняемая самостоятельно, созданная специально для вашего приложения. Но зачем изобретать велосипед заново? SubQuery фокусируется на создании надежного и быстрого открытого индексатора - мы здесь, чтобы сэкономить ваше время
- ** Разработка смарт-контрактов для запросов:** Некоторые команды даже внедряли пользовательские особенности в свои смарт-контракты, специально позволяющие выполнять более сложные запросы, специфичные для их прикладной логики.

В SubQuery есть SDK с открытым исходным кодом, который прост в использовании и работает молниеносно. Он предоставляет вам стандартную конечную точку GraphQL, но вы можете и просто запросить базу данных postgres напрямую. С его помощью вы можете индексировать уникальный набор данных из ваших собственных смарт-контрактов, что позволяет вам создавать превосходный продукт, который выбьет ваших конкурентов из колеи! Мы предоставляем вам гибкость в выборе необходимых вам данных в форме, которая лучше всего подходит для вас.

Надежность это ключевой фактор, поэтому вам нужна надежная и масштабируемая платформа для ее размещения. [Управляемый сервис SubQuery](https://subquery.network/managedservices) - это ведущее в отрасли решение для хостинга всех клиентов, которое обслуживает сотни миллионов ежедневных запросов в крупнейших проектах на Polkadot. Мы предоставляем нашим клиентам [корпоративного уровня](./20211228-enterprise-hosted.md) такие услуги, как выделенные базы данных, резервные кластеры, интеллектуальная многокластерная маршрутизация, а также расширенный мониторинг и аналитика. Все это поддержит ваше приложение, когда вы будете готовы, и будет масштабироваться вместе с вами.

И, наконец, через несколько месяцев вы сможете полностью децентрализовать свою инфраструктуру SubQuery с помощью сети SubQuery — будущего инфраструктуры Web3. Сеть Subquery будет индексировать и предоставлять данные о ваших проектах мировому сообществу стимулируемым и поддающимся проверке способом. Он предназначен для поддержки любого проекта SubQuery из любой сети layer-1, включая Terra, поэтому вы можете воспользоваться преимуществами масштаба объединенной сети SubQuery с момента запуска.

## Инструкции по установке

Сначала вам нужно будет установить последнюю версию @subql/cli через npm i -g @subql/cli@latest

Лучший способ - начать с [нашего начального проекта](https://github.com/subquery/terra-subql-starter), который содержит запущенный проект с примером всех функций сопоставления: Этот проект индексирует следующее:

- **BlockHandler(обработчик блоков):** Все блоки, их хэш и высота
- **TransactionHandler(обработчик транзакций):** Все транзакции и их хэш, высота и временная метка
- **EventHandler(обработчик событий):** Все события передачи смарт-контрактов и их хэш, высота, отправитель, получатель и сумма с отфильтрованного адреса смарт-контракта (bLuna)
- **MessageHandler(обработчик сообщений):** Все сообщения смарт-контракта и их хэш, высота, контракт, отправитель и данные execute_msg из отфильтрованного адреса смарт-контракта (bLuna)

Subquery поддерживает индексацию смарт-контрактов Terra как с помощью подписок на транзакции, так и с помощью сообщений и обработчиков. Вы можете увидеть рабочий пример поддержки смарт-контрактов в [стартовом проекте](https://github.com/subquery/terra-subql-starter) и ознакомиться с документацией в [университете SubQuery](http://localhost:8080/build/manifest.html#mapping-handlers-and-filters).

Реализация SubQuery на Terra была разработана почти идентично поддержке Polkadot на SubQuery, а также аналогично подходу к Graph. Мы обновили [университет Subquery](https://university.subquery.network/), чтобы добавить информацию, относящуюся к Terra, в общую документацию по SubQuery. Вы можете начать, следуя этому [превосходному руководству по началу работы](http://university.subquery.network/quickstart/quickstart-terra.html).

## Развертывание вашего проекта в управляемой службе Subquery

Хотя вы всегда сможете легко запустить свой проект в своей собственной инфраструктуре, [управляемая служба SubQuery](https://subquery.network/managedservices) теперь поддерживает проекты в Terra. Некоторые из самых крупных проектов зависят от управляемого сервиса SubQuery [корпоративного уровня](./20211228-enterprise-hosted.md), и теперь вы тоже можете это использовать. В рамках нашего партнерского соглашения о запуске мы предоставляем вам бесплатный хостинг на 3 месяца.

Вы можете [следовать этому руководству](https://university.subquery.network/run_publish/publish.html), чтобы опубликовать свой проект Terra на SubQuery в нашем управляемом сервисе. Пожалуйста, обратите внимание, что вы должны разместить свой проект на SubQuery [с использованием IPFS](https://university.subquery.network/run_publish/publish.html), а не GitHub.

Вы можете обновлять свой проект управляемого сервиса столько, сколько захотите. У нас даже есть [специальный слот для развертывания](./20210604-Deployment-Slots-are-here-for-SubQuery-Projects.md), позволяющий вам выполнять плавные обновления синего/зеленого статуса без каких-либо простоев. Этот промежуточный слот также можно использовать для запуска чистого экземпляра SubQuery со свежей базой данных для полной фоновой переиндексации вашего проекта. Клиенты обычно связывают промежуточный слот с промежуточными/разрабатываемыми версиями своих приложений.

После развертывания вы можете получить доступ к своему проекту с помощью проводника SubQuery и отправлять запросы непосредственно из своего приложения на предоставленную конечную точку GraphQL. Дайте нам знать, если вы хотите, чтобы мы включили более продвинутые функции, такие как [подписки GraphQL](https://university.subquery.network/run_publish/subscription.html), более сложные запросы и [функции агрегирования](https://university.subquery.network/run_publish/aggregate.html).

Пожалуйста, сообщите нам, как только вы развернете свой проект, поскольку нам может потребоваться помощь в точной настройке размера пакета, чтобы убедиться, что наш узел архива Terra хорошо работает для вашего проекта.

## Поддержка Subquery для Terra

Сегодня мы делимся следующим:

-   Расширенная индексация блоков, событий
-   Словарь Terra: Предварительно вычисленные индексы для [значительного сокращения времени индексации](./20210630-SubQuery-Just-Got-a-lot-Faster-with-the-Dictionary.md)
-   Полная поддержка Terra в нашем бесплатном управляемом сервисе [корпоративного уровня](./20211228-enterprise-hosted.md)
-   Интуитивно понятная документация в [университете SubQuery](https://university.subquery.network/)

В ближайшие недели вы можете ожидать:

-   Пошаговый курс обучения в [Академии SubQuery](https://blog.subquery.network/blogs/20211018-subquery-launches-the-subquery-academy.html)
-   Полная поддержка Terra в нашей децентрализованной сети SubQuery (скоро вы увидите проект в нашей текущей тестовой сети Frontier)

---

Запуск бета-версии поддержки Terra знаменует собой важную веху в нашем стремлении предложить сообществу Terra расширенные инструменты индексации, позволяющие ее разработчикам продвигаться не только дальше, но и значительно быстрее. Мы стремимся получить обратную связь от сообщества, чтобы улучшить предложенные функции и повысить нашу узнаваемость как надежного партнера по инфраструктуре для одного из самых быстрорастущих сообществ разработчиков в Web3

Джеймс Бэйли

## Ссылки

-   [Руководство по началу работы](https://university.subquery.network/quickstart/quickstart-terra.html)
-   [Университет SubQuery (Документация)](https://university.subquery.network/)
-   [Пример проекта Terra](https://github.com/subquery/terra-subql-starter)
-   [Управляемый сервис](https://explorer.subquery.network/)
-   [Публикация собственного проекта Terra в управляемом сервисе](https://project.subquery.network/)

## О проекте SubQuery

[SubQuery](https://subquery.network/) - это инструментарий разработчика блокчейна, позволяющий другим создавать приложения будущего на Web 3. Проект SubQuery - это полноценный API для организации и запроса данных из цепочек layer-1. Эти "данные как услуга", которые в настоящее время обслуживают проекты Polkadot, Substrate и Avalanche, позволяют разработчикам сосредоточиться на своем основном сценарии применения и фронтэнде, не тратя время на создание бэкэнда для обработки данных. Сеть SubQuery предлагает такое же масштабируемое и надежное решение, но полностью децентрализованным способом.

​​[Linktree](https://linktr.ee/subquerynetwork) | [Веб-Сайт](https://subquery.network/) | [Дискорд](https://discord.com/invite/78zg8aBSMG) | [телеграм](https://t.me/subquerynetwork) | [Твиттер](https://twitter.com/subquerynetwork) | [Матрица](https://matrix.to/#/#subquery:matrix.org) | [LinkedIn](https://www.linkedin.com/company/subquery) | [YouTube](https://www.youtube.com/channel/UCi1a6NUUjegcLHDFLr7CqLw)
