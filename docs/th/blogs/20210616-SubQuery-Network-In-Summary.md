# สรุปภาพรวม SubQuery Network

**SubQuery Network ทำงานอย่างไร? ELI5**

วันนี้เราจะมาพูดถึงว่า SubQuery Network ทำงานในระดับสูงได้อย่างไร

## ผู้มีส่วนร่วม

![](https://miro.medium.com/max/1400/1*9993cakplwupZC5tbUv3vA.png)

ผู้มีส่วนร่วมในเครือข่าย SubQuery Network

ผู้มีส่วนร่วมใน SubQuery Network มีทั้งหมด 3 ส่วน:

- **Consumer(ผู้ใช้ข้อมูล)**: Consumer จะสร้างคำขอสำหรับข้อมูลที่เฉพาะเจาะจงไปยัง SubQuery Network และจะจ่ายค่าข้อมูลนั้นๆด้วย SQT
- **Indexer(ผู้สร้างดัชนี)**: Indexer จะโฮสต์ SubQuery บนโครงสร้างพื้นฐานของตนเอง, ดำเนินการทั้งโหนดและบริการ query เพื่อสร้างดัชนีข้อมูลและตอบคำขอของ GraphQL
- **Delegator(ตัวแทน)**: Delegator จะมีส่วนร่วมในเครือข่ายด้วยการสนับสนุน indexer ที่ตัวเองชื่นชอบ เพื่อรับรางวัลส่วนแบ่งจาก Indexer

## Indexers, Consumers, และ Queries

เริ่มต้นด้วย Indexer โดย Indexer เป็นผู้ที่ทำงานอย่างหนักอยู่เบื้องหลัง โดยต้องจัดการฮาร์ดแวร์ ดำเนินการโครงสร้างพื้นฐาน ตรวจสอบทรัพยากร และเลือกโครงการ SubQuery ที่เหมาะสมเพื่อสร้าง Index

สิ่งเหล่านี้ต้องใช้เวลาและเงิน แต่เมื่อมี Indexers แล้ว Consumers ก็จะเข้ามาและสร้างคำขอ โดย Consumers จะส่งคำขอไปยัง SubQuery Network เพื่อขอข้อมูลเฉพาะและชำระเงินตามจำนวนที่แจ้งด้วยโทเค็นของเรา, SQT

![](https://miro.medium.com/max/1400/1*dKLkzSc2uXYaPW_IXUxstQ.png)

## ฟังก์ชั่นการผลิตแบบ Cobb-Douglas

การชำระเงินนี้จะเข้าไปที่ project revenue pool และเมื่อจบช่วงการ staking (28 วัน) รายได้ใน project revenue pool จะถูกจัดสรร โดยการจัดสรรจะถูกแบ่งให้เหล่า Indexers ด้วยสิ่งที่เรียกว่า Cobb-Douglas production function

![](https://miro.medium.com/max/1400/1*E-W7o7cWoclxHb8rXAMdpA.png)

วิธีการนี้ อธิบายง่ายๆคือ รายได้จะถูกจัดสรรให้ Indexers ที่แข่งขันกันตามสัดส่วนของคำขอที่ตอบกลับและจำนวนโทเค็นที่ถูก Stake

![](https://miro.medium.com/max/1400/1*VhDu2BGDxd3ob7z9XkoOXA.png)

ในมุมมองของเรา ความสวยงามของความเสมอภาคนี้คือ Indexers มีเหตุผลที่ต้องประคองระดับการ Stake โทเค็น SQT ให้สัมพันธ์กับงานที่พวกเขาทำ เพื่อการรับรายได้ที่เหมาะสมที่สุด ด้วยเหตุนี้ เราจึงไม่มีความจำเป็นในการบังคับใช้ข้อกำหนดในการ Stake เพราะว่า Indexers มีแรงจูงใจในการจัดการตัวเองและรักษาระดับการ Stake หรือการมีส่วนร่วมในระบบ

## Delegator(ตัวแทน)

เมื่อ Indexers มีแรงจูงใจทั้งในการทำงานให้ได้มากที่สุดและ การ Stake ให้ได้เยอะที่สุดที่เป็นไปได้ เพื่อการรับผลตอบแทนสูงสุด และนี่คือที่ๆ Delegators เข้ามามีส่วนร่วม

Delegators สามารถมอบสิทธิ์ SQT ของพวกเขา ให้กับ Indexers ซึ่ง Indexers แต่ละคนจะสามารถเผยแพร่ _อัตราส่วนแบ่งรายได้จากค่าธรรมเนียมการ query _ และ Delegators จะได้รางวัลส่วนแบ่งจากส่วนหนึ่งของค่าธรรมเนียมการ query ที่ Indexers ได้รับ

![](https://miro.medium.com/max/1400/1*YoN7PV7h3a2nAFN-ODqILg.png)

_อัตราส่วนแบ่งรายได้จากค่าธรรมเนียมการ query_ ที่ Indexers ประกาศไว้จะถูกล็อคไว้ในแต่ละรอบเป็นเวลา 28 วันของการ staking และการลดลงของส่วนแบ่งรายได้ต้องมีการประกาศตลอดช่วงการ staking 28 วัน ก่อนจะมีผลบังคับใช้

ในทำนองเดียวกัน Delegators สามารถดึงจำนวน delegation ที่พวกเขามอบให้ออกมาเมื่อใดก็ได้ แต่พวกเขาจะได้รับรางวัลเมื่ออยู่จนจบช่วงการ staking เท่านั้น

![](https://miro.medium.com/max/1400/0*we0k4A07pbj86COZ)

Delegators จะได้รับรางวัลเมื่อพวกเขาอยู่จนจบช่วงการ staking เท่านั้น

## Purchase Orders(คำสั่งซื้อ)

ในการทำ Indexing โครงการ ต้องใช้เวลาและเงิน และมันก็มีจำนวนข้อมูลมากมายบนเชน เพื่อเป็นการสนับสนุน Indexers ในการ index และสนับสนุนโครงการใหม่ๆของ SubQuery ทั้งหมด เราวางแผนที่จะใช้กลไกตลาดสำหรับ Consumers ในการการันตีรายได้ให้กับ Indexers สำหรับโครงการใหม่ๆ ของ SubQuery

เราจะเรียกมันว่า purchase order และ Consumers สามารถประกาศสัญญาบนเชน เพื่อตั้งราคาและจำนวนของคำร้องขอ Indexers สามารถดูข้อมูลและเลือกทำสัญญาได้

![](https://miro.medium.com/max/1400/1*IPtaZlt24E7h9bKNZWdSCw.png)

Consumers สามารถประกาศ purchase order บนเชน เพื่อตั้งราคาและจำนวนของคำร้องขอ

Purchase orders ยังสามารถวางในโครงการ SubQuery ที่มีอยู่เพื่อดึงดูดเหล่า Indexers อื่นๆ มาแข่งขันและลดราคา
