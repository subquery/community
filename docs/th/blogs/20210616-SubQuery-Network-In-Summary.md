# สรุปภาพรวม SubQuery Network

**SubQuery Network ทำงานอย่างไร? ELI5**

วันนี้เราจะมาพูดถึงว่า SubQuery Network ทำงานในระดับสูงได้อย่างไร

## ผู้มีส่วนร่วม

![](https://miro.medium.com/max/1400/1*9993cakplwupZC5tbUv3vA.png)

ผู้มีส่วนร่วมในเครือข่าย SubQuery Network

ผู้มีส่วนร่วมใน SubQuery Network มีทั้งหมด 3 ส่วน:

- **Consumer(ผู้ใช้ข้อมูล)**: Consumer จะสร้างคำขอสำหรับข้อมูลที่เฉพาะเจาะจงไปยัง SubQuery Network และจะจ่ายค่าข้อมูลนั้นๆด้วย SQT
- **Indexer(ผู้สร้างดัชนี)**: Indexer จะโฮสต์ SubQuery บนโครงสร้างพื้นฐานของตนเอง, ดำเนินการทั้งโหนดและบริการ query เพื่อสร้างดัชนีข้อมูลและตอบคำขอของ GraphQL
- **Delegator(ตัวแทน)**: Delegator จะมีส่วนร่วมในเครือข่ายด้วยการสนับสนุน indexer ที่ตัวเองชื่นชอบ เพื่อรับรางวัลส่วนแบ่งจาก Indexer

## Indexers, Consumers, และ Queries

เริ่มต้นด้วย Indexer โดย Indexer เป็นผู้ที่ทำงานอย่างหนักอยู่เบื้องหลัง โดยต้องจัดการฮาร์ดแวร์ ดำเนินการโครงสร้างพื้นฐาน ตรวจสอบทรัพยากร และเลือกโครงการ SubQuery ที่เหมาะสมเพื่อสร้าง Index

สิ่งเหล่านี้ต้องใช้เวลาและเงิน แต่เมื่อมี Indexers แล้ว Consumers ก็จะเข้ามาและสร้างคำขอ โดย Consumers จะส่งคำขอไปยัง SubQuery Network เพื่อขอข้อมูลเฉพาะและชำระเงินตามจำนวนที่แจ้งด้วย Token ของเรา, SQT

![](https://miro.medium.com/max/1400/1*dKLkzSc2uXYaPW_IXUxstQ.png)

## ฟังก์ชั่นการผลิตแบบ Cobb-Douglas

การชำระเงินนี้จะเข้าไปที่ project revenue pool และเมื่อจบช่วงการ staking (28 วัน) รายได้ใน project revenue pool จะถูกจัดสรร โดยการจัดสรรจะถูกแบ่งให้เหล่า Indexers ด้วยสิ่งที่เรียกว่า Cobb-Douglas production function

![](https://miro.medium.com/max/1400/1*E-W7o7cWoclxHb8rXAMdpA.png)

วิธีการนี้ อธิบายง่ายๆคือ รายได้จะถูกจัดสรรตามความสามารถในการแข่งขันของ Indexer ตามสัดส่วนคำขอที่เข้ามาและจำนวนโทเค็นที่ stake

![](https://miro.medium.com/max/1400/1*VhDu2BGDxd3ob7z9XkoOXA.png)

.

ในมุมมองของเรา ความสวยงามของสมการนี้คือ Indexer มีเหตุผลจะต้องประคองระดับการ stake โทเค็น SQT ให้สัมพันธ์กับงานที่พวกเขาทำ เพื่อการรับรายได้ที่เหมาะสมที่สุด  ด้วยเหตุนี้ เราจึงไม่จำเป็นต้องมีการบังคับใช้ข้อกำหนดในการ stake เพราะว่า Indexer มีแรงจูงใจในการจัดการตัวเองและรักษาระดับการ stake หรือการมีส่วนร่วมในระบบ

## Delegator(ตัวแทน)

เมื่อ Indexer มีแรงจูงใจทั้งในการทำงานให้ได้มากที่สุดและ stake ให้ได้เยอะที่สุด เพื่อเพิ่มผลตอบแทนสูงสุด  นี่คือที่ๆ Delegator เข้ามามีส่วนร่วม

Delegator สามารถมอบสิทธิ์ SQT ของพวกเขา ให้กับ Indexer ซึ่ง Indexer แต่ละคนจะสามารถเผยแพร่ อัตราส่วนแบ่งจากรายได้จากค่าธรรมเนียมการ query และ Delegators จะได้รางวัลที่เป็นส่วนหนึ่งของรายได้จากค่าธรรมเนียมการ query ที่ Indexer ได้รับ

![](https://miro.medium.com/max/1400/1*YoN7PV7h3a2nAFN-ODqILg.png)

.

อัตราส่วนแบ่งรายได้จากค่าธรรมเนียมการ query ที่ Indexer ประกาศจะถูกล็อคไว้ในแต่ละรอบเป็นเวลา 28 วัน และการลดลงต้องมีการประกาศตลอดช่วงการ stake 28 วัน ก่อนจะมีผลบังคับใช้

ในทำนองเดียวกัน Delegator สามารถนำจำนวนสิทธิ์ที่พวกเขามอบให้ ออกมาเมื่อใดก็ได้ แต่พวกเขาจะได้รับรางวัลเมื่ออยู่จนจบช่วง stake เท่านั้น (28 วัน)

![](https://miro.medium.com/max/1400/0*we0k4A07pbj86COZ)

.

## Purchase Orders(คำสั่งซื้อ)

ในการทำโครงการ Index โครงการหนึ่ง ต้องใช้เวลาและเงิน และมันก็มีจำนวนข้อมูลมากมายบนเชน เพื่อที่จะเป็นการสนับสนุน Indexer ในการ index และสนับสนุนโครงการใหม่ๆของ SubQuery ทั้งหมด เราวางแผนที่จะใช้กลไกตลาดสำหรับ Consumer ในการส่งสัญญาณการการันตีรายได้ให้กับ Indexer สำหรับโครงการใหม่ของ SubQuery

เราจะเรียกพวกมันว่า purchase order และ Consumer สามารถประกาศสัญญาบนเชน เพื่อตั้งราคาและจำนวนของคำร้องขอ  Indexer สามารถดูสิ่งนี้และเลือกทำสัญญาได้

![](https://miro.medium.com/max/1400/1*IPtaZlt24E7h9bKNZWdSCw.png)

.

คำสั่งซื้อยังสามารถวางในโครงการ SubQuery ที่มีอยู่เพื่อดึงดูดตัวสร้างดัชนีเพิ่มเติมเพื่อปรับปรุงการแข่งขันและลดราคา
